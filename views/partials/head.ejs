<!-- views/partials/head.ejs -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- PWA Configuration -->
<meta name="application-name" content="Sistema de Demandas Escolares">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="DemandasEscolares">
<meta name="description" content="Sistema para gerenciamento de demandas escolares">
<meta name="format-detection" content="telephone=no">
<meta name="mobile-web-app-capable" content="yes">
<meta name="msapplication-TileColor" content="#0d6efd">
<meta name="msapplication-tap-highlight" content="no">
<meta name="theme-color" content="#0d6efd">

<!-- Apple Touch Icons -->
<link rel="apple-touch-icon" href="/images/icon-192x192.png">
<link rel="apple-touch-icon" sizes="192x192" href="/images/icon-192x192.png">
<link rel="apple-touch-icon" sizes="512x512" href="/images/icon-512x512.png">

<!-- PWA Manifest e Favicon -->
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/images/favicon.ico">

<title><%= title %> - Sistema de Demandas Escolares</title>

<!-- Bootstrap 5 -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<!-- CSS Personalizado do Sistema -->
<link rel="stylesheet" href="/css/style.css">

<!-- Font Awesome -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<!-- Socket.io para notifica√ß√µes push em tempo real -->
<script src="/socket.io/socket.io.js"></script>
<style>
    /* ESTILOS ESSENCIAIS - SEM CORES FIXAS */
    
    /* LAYOUT E ESPA√áAMENTOS */
    body { 
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
    }
    
    /* CONTAINER PRINCIPAL */
    .main-container {
        flex: 1;
    }
    
    /* CARDS - SOMENTE FORMATO, SEM CORES */
    .card {
        border-radius: 12px;
        transition: transform 0.3s ease;
    }
    
    .card:hover {
        transform: translateY(-3px);
    }
    
    /* UTILIT√ÅRIOS */
    .cursor-pointer { cursor: pointer; }
    
    /* ANIMA√á√ÉO DE ENTRADA */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .fade-in {
        animation: fadeIn 0.5s ease-out;
    }
    
    /* LOADING */
    .spinner-container {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px;
    }
    
    /* RESPONSIVIDADE B√ÅSICA */
    @media (max-width: 768px) {
        .table-responsive { 
            font-size: 0.9rem; 
        }
        
        .btn {
            width: 100%;
            margin-bottom: 0.5rem;
        }
        
        .btn-group .btn {
            width: auto;
        }
    }
    
    /* SCROLL SUAVE */
    html {
        scroll-behavior: smooth;
    }
</style>

<!-- Chart.js para gr√°ficos -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<!-- ============================================
     üé≠ ANIMA√á√ïES - CARREGAMENTO SUAVE
     ============================================ -->
<script>
// Aguardar a p√°gina carregar completamente
document.addEventListener('DOMContentLoaded', function() {
    
    console.log('üé≠ Sistema de Anima√ß√µes Carregado!');
    
    // 1Ô∏è‚É£ Adicionar classe 'loaded' ao body
    setTimeout(function() {
        document.body.classList.add('loaded');
        console.log('‚úÖ P√°gina carregada com sucesso!');
    }, 100);
    
    // 2Ô∏è‚É£ Adicionar anima√ß√£o √† navbar
    const navbar = document.querySelector('.navbar');
    if (navbar) {
        navbar.classList.add('animate-card');
        navbar.classList.add('delay-1');
    }
    
    // 3Ô∏è‚É£ Adicionar anima√ß√£o √† sidebar
    const sidebar = document.querySelector('.list-group');
    if (sidebar) {
        sidebar.classList.add('animate-sidebar');
        sidebar.classList.add('delay-2');
    }
    
    // 4Ô∏è‚É£ Adicionar anima√ß√£o aos cards (com delay progressivo)
    const cards = document.querySelectorAll('.card');
    if (cards.length > 0) {
        cards.forEach((card, index) => {
            // Delay progressivo: 0.1s, 0.2s, 0.3s, etc
            const delayClass = 'delay-' + ((index % 4) + 1);
            card.classList.add('animate-card');
            card.classList.add(delayClass);
        });
        console.log(`‚úÖ ${cards.length} cards animados`);
    }
    
    // 5Ô∏è‚É£ Adicionar anima√ß√£o aos bot√µes principais
    const primaryButtons = document.querySelectorAll('.btn-primary, .btn-success');
    if (primaryButtons.length > 0) {
        primaryButtons.forEach(btn => {
            btn.classList.add('animate-button');
        });
    }
    
    // 6Ô∏è‚É£ Efeito especial no t√≠tulo principal
    const mainTitle = document.querySelector('h1');
    if (mainTitle) {
        mainTitle.classList.add('animate-card');
        mainTitle.classList.add('delay-1');
    }
    
    // 7Ô∏è‚É£ Efeito de clique nos bot√µes (feedback t√°til)
    document.querySelectorAll('.btn').forEach(button => {
        button.addEventListener('click', function() {
            // Efeito de clique
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = '';
            }, 200);
        });
    });
    
    // 8Ô∏è‚É£ Efeito de hover nas cards (brilho suave)
    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.boxShadow = '0 10px 30px rgba(0, 150, 225, 0.2)';
        });
        card.addEventListener('mouseleave', function() {
            this.style.boxShadow = '';
        });
    });
    
    // 9Ô∏è‚É£ Feedback visual para formul√°rios
    document.querySelectorAll('form').forEach(form => {
        form.addEventListener('submit', function() {
            const submitBtn = this.querySelector('button[type="submit"]');
            if (submitBtn) {
                // Mostrar que est√° processando
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processando...';
                submitBtn.disabled = true;
                
                // Restaurar ap√≥s 3 segundos (simula√ß√£o)
                setTimeout(() => {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }, 3000);
            }
        });
    });
    
    // üîü Indicador visual de carregamento
    const loadingBar = document.createElement('div');
    loadingBar.className = 'loading-indicator';
    document.body.prepend(loadingBar);
    
    // Remover barra de loading ap√≥s carregar
    setTimeout(() => {
        if (loadingBar.parentNode) {
            loadingBar.style.opacity = '0';
            setTimeout(() => {
                if (loadingBar.parentNode) {
                    loadingBar.remove();
                }
            }, 500);
        }
    }, 1000);
});

// Fun√ß√£o simples para recarregar anima√ß√µes
window.reloadAnimations = function() {
    console.log('üîÑ Recarregando anima√ß√µes...');
    document.body.classList.remove('loaded');
    setTimeout(() => {
        document.body.classList.add('loaded');
    }, 100);
};
</script>

<!-- ============================================
     üì± ESTILOS PARA ANIMA√á√ïES
     ============================================ -->
<style>
/* Barra de carregamento superior */
.loading-indicator {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(90deg, #0096E1, #4db8ff, #0096E1);
    background-size: 200% 100%;
    z-index: 9999;
    animation: loadingSlide 1.5s infinite linear;
}

@keyframes loadingSlide {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
}

/* Fade-in para todo o conte√∫do */
body {
    opacity: 0;
    animation: bodyFadeIn 0.5s ease-out 0.1s forwards;
}

@keyframes bodyFadeIn {
    to { opacity: 1; }
}

/* Efeito de digita√ß√£o para t√≠tulos (opcional) */
.typing-effect {
    overflow: hidden;
    border-right: 3px solid #0096E1;
    white-space: nowrap;
    animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
}

@keyframes typing {
    from { width: 0; }
    to { width: 100%; }
}

@keyframes blink-caret {
    from, to { border-color: transparent; }
    50% { border-color: #0096E1; }
}

/* Pulsa√ß√£o suave para elementos importantes */
@keyframes gentlePulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
}

.pulse-soft {
    animation: gentlePulse 2s infinite ease-in-out;
}

/* Flutua√ß√£o suave */
@keyframes gentleFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
}

.float-soft {
    animation: gentleFloat 3s infinite ease-in-out;
}

/* Indicador de novo conte√∫do */
@keyframes newContentIndicator {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
}

.new-item {
    animation: newContentIndicator 1.5s infinite;
}
</style>
<!-- ============================================ -->
<!-- üîî SISTEMA DE NOTIFICA√á√ïES INTEGRADO -->
<!-- ============================================ -->
<script src="/js/notifications.js" defer></script>
<!-- ============================================ -->
<!-- üöÄ SISTEMA DE NOTIFICA√á√ïES PUSH EM TEMPO REAL -->
<!-- ============================================ -->
<script src="/js/push-notifications.js" defer></script>

<!-- Hidden input para ID do usu√°rio (ser√° preenchido dinamicamente) -->
<input type="hidden" id="user-id" value="<%= user ? user._id : 'anonymous' %>">

<!-- Estilos espec√≠ficos para notifica√ß√µes push -->
<style>
    /* Badge animado para notifica√ß√µes */
    .notification-badge-pulse {
        animation: badgePulse 2s infinite;
    }
    
    @keyframes badgePulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }
    
    /* √çcone de notifica√ß√£o flutuante */
    .notification-float {
        animation: floatNotification 3s ease-in-out infinite;
    }
    
    @keyframes floatNotification {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-5px); }
    }
    
    /* Indicador de conex√£o */
    .connection-status {
        position: fixed;
        bottom: 10px;
        right: 10px;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        z-index: 9999;
        display: none;
    }
    
    .connection-status.online {
        background-color: rgba(0, 150, 225, 0.9);
        color: white;
        display: block;
    }
    
    .connection-status.offline {
        background-color: rgba(255, 59, 48, 0.9);
        color: white;
        display: block;
    }
</style>